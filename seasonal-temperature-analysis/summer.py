'''
[ ì²´ê° ê³„ì ˆ ê¸°ê°„ - 6, 7, 8ì›” ì—¬ë¦„ ]
1. ê³„ì ˆ ê¸°ê°„ì´ ë‚˜ëˆ ì§(ì• ì´ˆ í‰ê· ê¸°ì˜¨ìœ¼ë¡œ ë‚˜ëˆ ì§)
2. í‰ê· ì˜¨ë„ ê¸°ì¤€: newê³„ì ˆë³„ ê¸°ê°„ ì •í•¨
	- ê¸°ì¡´ê³„ì ˆê¸°ê°„ ë°ì´í„° ë½‘ê¸°
	- ìƒˆë¡œ ì •í•œ ê³„ì ˆê¸°ê°„ ë½‘ê¸°
3. ê¸°ì¡´ê³„ì ˆê¸°ê°„ê³¼ ìƒˆë¡œ ì •í•œ ê³„ì ˆê¸°ê°„ê³¼ ë¹„êµ
	- ê³„ì ˆë³„ ê¸°í›„ íŠ¹ì„±(ex: ê°•ìˆ˜ëŸ‰ì„ í†µí•´ í™•ì¸ )
3. ê¸°ì¡´ê³„ì ˆê³¼ ê¸°í›„íŠ¹ì„±ê³¼ ìƒˆê¸°ì¤€ê³¼ ê¸°í›„ íŠ¹ì„± ë¹„êµ
íŒŒì´ë‘ ë§‰ëŒ€ê·¸ë˜í”„ë¡œ í‘œí˜„
'''


## ------------------------------------------------------------------------------------------------------
## [1] ëª¨ë“ˆ ë¡œë”© ë° ë°ì´í„° ì¤€ë¹„
## ------------------------------------------------------------------------------------------------------
## [1-1] ëª¨ë“ˆ ë¡œë”©
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
import koreanize_matplotlib
import numpy as np




## ----------------------------------------------------------------------------
## ê·¸ë˜ì„œ ì—¬ë¦„ì€?
## ----------------------------------------------------------------------------
file = '../mini_project/ì „êµ­_í‰ê· _ê¸°ì˜¨_94_24.xlsx'
# file = r"C:\Users\KDT-13\Desktop\KDT 7\project\TP3_public\ì „êµ­_í‰ê· _ê¸°ì˜¨_94_24.xlsx"
df = pd.read_excel(file)

df.columns = ['ë‚ ì§œ', 'ì§€ì ', 'í‰ê· ê¸°ì˜¨', 'ìµœì €ê¸°ì˜¨', 'ìµœê³ ê¸°ì˜¨']
df = df.drop(labels=['ì§€ì '], axis=1)
df['ë‚ ì§œ'] = pd.to_datetime(df['ë‚ ì§œ'], format='%Y-%m-%d')
df['ë…„'] = pd.to_datetime(df['ë‚ ì§œ']).dt.year # ì—° ì»¬ëŸ¼ ë½‘ê¸°
df['ì›”'] = pd.to_datetime(df['ë‚ ì§œ']).dt.month # ì›” ì»¬ëŸ¼ ë§Œë“¤ê¸°


# 6ì›” ì´í›„ ë°ì´í„°ë§Œ ë‚¨ê¹€
# df = df[df['ë‚ ì§œ'].dt.month > 6]

# ì—°ë„ì™€ ì›” ì¶”ê°€
# df['ë…„'] = df['ë‚ ì§œ'].dt.year
# df['ì›”'] = df['ë‚ ì§œ'].dt.month

# ì˜¨ë„ ì¡°ê±´ (5~20ë„) ì¶©ì¡± ì—¬ë¶€ (1 = ì¶©ì¡±, 0 = ë¯¸ì¶©ì¡±)
df['ì˜¨ë„_ì¶©ì¡±'] = (df['í‰ê· ê¸°ì˜¨'] >= 20 ).astype(int)

# ê° ì—°ë„-ì›”ë³„ ì˜¨ë„ ì¶©ì¡± ì¼ìˆ˜ ê³„ì‚°
monthly_counts = df.groupby(['ë…„', 'ì›”'])['ì˜¨ë„_ì¶©ì¡±'].sum().reset_index()

# ì„ê³„ê°’ ì„¤ì • (ì˜ˆ: 15ì¼ ì´ìƒì´ë©´ ê°€ì„ë¡œ ì¸ì •)
threshold = 15
monthly_counts['ì—¬ë¦„_ì—¬ë¶€'] = monthly_counts['ì˜¨ë„_ì¶©ì¡±'] >= threshold

# ì›ë³¸ ë°ì´í„°ì— 'ì—¬ë¦„ ì—¬ë¶€' ë³‘í•©
df = df.merge(monthly_counts[['ë…„', 'ì›”', 'ì—¬ë¦„_ì—¬ë¶€']], on=['ë…„', 'ì›”'], how='left')

# ì—¬ë¦„ë¡œ íŒì •ëœ ë°ì´í„° í•„í„°ë§
df_new = df[df['ì—¬ë¦„_ì—¬ë¶€']]




## ----------------------------------------------------------------------------
## ----------------------------------------------------------------------------

df_new = df_new.copy()  # ğŸ”´ : ìŠ¬ë¼ì´ìŠ¤ ë¬¸ì œ ë°©ì§€

# 1-2    ì—¬ë¦„(6~8ì›”)ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„° í•„í„°ë§ = df_old
df_old=df[df['ë‚ ì§œ'].dt.month.isin([6, 7, 8])] 
df_old = df_old.copy()  # ë³µì‚¬ë³¸ ìƒì„±


df_new_result = df_new.groupby('ë…„')['ì›”'].value_counts().to_frame() # ë…„ì— í•´ë‹¹í•˜ëŠ” ì›”ì˜ ì¼ë“¤ì„ ì¹´ìš´íŠ¸
df_new_result = df_new_result.sort_index() # ë…„ë„,ì›”ë³„ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ 



### df_old ì „ì²˜ë¦¬
df_old['ë…„'] = pd.to_datetime(df_new['ë‚ ì§œ']).dt.year # datetimeì— ë…„ì„ ë½‘ì•„ëƒ„  
df_old['ì›”'] = pd.to_datetime(df_new['ë‚ ì§œ']).dt.month # datetimeì— ì›”ì„ ë½‘ì•„ëƒ„ 


df_old_result = df_old.groupby('ë…„')['ì›”'].value_counts().to_frame() # ë…„ì— í•´ë‹¹í•˜ëŠ” ì›”ì˜ ì¼ë“¤ì„ ì¹´ìš´íŠ¸
df_old_result = df_old_result.sort_index() # ë…„ë„, ì›”ë³„ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬

df_new_result = df_new[df_new['ì˜¨ë„_ì¶©ì¡±'] == 1].groupby('ë…„')['ì›”'].value_counts().to_frame()
df_new_result=df_new_result.sort_index()

## ì—°ë„ë³„ ì›”ë³„ ì¹´ìš´íŠ¸ í•©
df_old_Cyear = df_old_result.groupby(level=0)['count'].sum().to_frame()
df_new_Cyear = df_new_result.groupby(level=0)['count'].sum().to_frame()

# ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
plt.figure(figsize=(8,5))
plt.plot(df_old_Cyear, marker='o', label='df_old_Cyear')
plt.plot(df_new_Cyear, marker='s', label='df_new_Cyear')
plt.ylabel("ì¼ìˆ˜")
plt.xlabel("ì—°ë„")
plt.xticks(range(1994, 2025, 3))
plt.legend()
plt.show()

## ----------------------------------------------------------------------------
## ----------------------------------------------------------------------------

# ì°¨ì´ ê³„ì‚°
df_diff = df_new_Cyear - df_old_Cyear

# ê·¸ë˜í”„ ì„¤ì •
x = df_diff.index # ì—°ë„
y = df_diff.values.flatten() # ì°¨ì´ ê°’

# ì„ í˜• íšŒê·€ë¥¼ ì´ìš©í•œ ì¶”ì„¸ì„  ê³„ì‚°
coefficients = np.polyfit(x, y, 1)  # 1ì°¨ ë°©ì •ì‹ (ì§ì„ ) ì¶”ì„¸ì„ 
trend_line = np.poly1d(coefficients)  # ë°©ì •ì‹ ìƒì„±

plt.figure(figsize=(10, 6))
plt.plot(x, y, marker='o', linestyle='-', label='ì°¨ì´')
plt.plot(x, trend_line(x), linestyle='--', color='orange', label='ì¶”ì„¸ì„ ')  # ì¶”ì„¸ì„  ì¶”ê°€
# plt.axhline(0, color='red', linestyle='--', label='ê¸°ì¤€ì„ ')
plt.xlabel('ì—°ë„')
plt.ylabel('ì°¨ì´')
plt.title('ê¸°ì¡´ ì—¬ë¦„(df_old)ê³¼ ìƒˆë¡œìš´ ì—¬ë¦„(df_new) ê¸°ê°„ì˜ ì°¨ì´')
plt.legend()
plt.grid(True)
plt.show()


## ----------------------------------------------------------------------------
## ----------------------------------------------------------------------------
## --------------------------------------------------------------------------------------------------------------
## [1] ë°ì´í„° ë¡œë”©
## --------------------------------------------------------------------------------------------------------------
file_h = '../mini_project/ì „êµ­í­ì—¼ì¼ìˆ˜_94_24.csv'
df_h = pd.read_csv(file_h, encoding='cp949')

## --------------------------------------------------------------------------------------------------------------
## [2] ë°ì´í„° ì „ì²˜ë¦¬
## --------------------------------------------------------------------------------------------------------------

# [2-1] ì»¬ëŸ¼ëª… ì •ë¦¬
df_h.columns = ['ë‚ ì§œ', 'í­ì—¼ì¼ìˆ˜', 'í‰ê· ìµœê³ ê¸°ì˜¨']

# [2-2] ë‚ ì§œ ë³€í™˜
df_h['ë‚ ì§œ'] = pd.to_datetime(df_h['ë‚ ì§œ'], format='%b-%y')
df_h['ì—°ì›”'] = df_h['ë‚ ì§œ'].dt.strftime('%Y-%m')
df_h['ì›”'] = df_h['ë‚ ì§œ'].dt.month  # í•„í„°ë§ìš©


df_strang_h = df_h[df_h['ì›”'].isin([1,2,3,4,5, 6,7,8,9, 10,11,12])]
# í­ì—¼ ë°œìƒì´ ìˆëŠ” ë°ì´í„°ë§Œ í•„í„°ë§
df_nonzero = df_strang_h[df_strang_h['í­ì—¼ì¼ìˆ˜'] > 0]

## --------------------------------------------------------------------------------------------------------------
## [3] ì‹œê°í™” (Xì¶• ì •ë°€í•˜ê²Œ ìˆ˜ì •)
## --------------------------------------------------------------------------------------------------------------
## [3] ì‹œê°í™” (ë§‰ëŒ€ê·¸ë˜í”„ + Xì¶• ëˆˆê¸ˆ 20ê°œë§Œ ì¶œë ¥ + ì¶”ì„¸ì„  ì¶”ê°€)

plt.figure(figsize=(25, 6))

# Xì¶•ì„ ìˆ«ìë¡œ ë³€í™˜ (ì—°ì›”ì„ ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©)
x_values = np.arange(len(df_nonzero))
y_values = df_nonzero['í­ì—¼ì¼ìˆ˜']

# ğŸ”¹ ë§‰ëŒ€ê·¸ë˜í”„ (í­ì—¼ ì¼ìˆ˜)
plt.bar(x_values, y_values, color='red', alpha=0.7, label='í­ì—¼ì¼ìˆ˜')

# ğŸ”¹ Xì¶• ëˆˆê¸ˆ 20ê°œë§Œ ì¶œë ¥ (ê· ë“± ê°„ê²©ìœ¼ë¡œ ì„ íƒ)
num_ticks = 20
tick_indices = np.linspace(0, len(df_nonzero) - 1, num_ticks, dtype=int)  # ê· ë“± ê°„ê²© ì„ íƒ
tick_labels = df_nonzero['ì—°ì›”'].iloc[tick_indices]  # í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ì—°ì›”ë§Œ ì„ íƒ

plt.xticks(ticks=tick_indices, labels=tick_labels, rotation=90)

# ğŸ”¹ ğŸ”¥ ì¶”ì„¸ì„  ì¶”ê°€ (ì„ í˜• íšŒê·€)
z = np.polyfit(x_values, y_values, 1)  # 1ì°¨ íšŒê·€ (ì„ í˜•)
p = np.poly1d(z)  # íšŒê·€ì„  í•¨ìˆ˜ë¡œ ë³€í™˜
plt.plot(x_values, p(x_values), color='blue', linestyle='--', linewidth=2, label='ì¶”ì„¸ì„ ')

plt.xlabel('ë‚ ì§œ')
plt.ylabel('í­ì—¼ì¼ìˆ˜')
plt.title('í­ì—¼ ë°œìƒì¼ìˆ˜ ë³€í™” (1994~2024) + ì¶”ì„¸ì„ ')
plt.legend()
plt.grid(True)

# ê·¸ë˜í”„ ì¶œë ¥
plt.show()


## [3] ì‹œê°í™” (ë§‰ëŒ€ê·¸ë˜í”„ + Xì¶• ëˆˆê¸ˆ 20ê°œë§Œ ì¶œë ¥)

# plt.figure(figsize=(25, 6))

# # Xì¶•ì„ ìˆ«ìë¡œ ë³€í™˜ (ì—°ì›”ì„ ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©)
# x_values = np.arange(len(df_nonzero))
# y_values = df_nonzero['í­ì—¼ì¼ìˆ˜']

# # ğŸ”¹ ë§‰ëŒ€ê·¸ë˜í”„ (í­ì—¼ ì¼ìˆ˜)
# plt.bar(x_values, y_values, color='red')

# # ğŸ”¹ Xì¶• ëˆˆê¸ˆ 20ê°œë§Œ ì¶œë ¥ (ê· ë“± ê°„ê²©ìœ¼ë¡œ ì„ íƒ)
# num_ticks = 20
# tick_indices = np.linspace(0, len(df_nonzero) - 1, num_ticks, dtype=int)  # ê· ë“± ê°„ê²© ì„ íƒ
# tick_labels = df_nonzero['ì—°ì›”'].iloc[tick_indices]  # í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ì—°ì›”ë§Œ ì„ íƒ

# plt.xticks(ticks=tick_indices, labels=tick_labels, rotation=90)

# plt.xlabel('ë‚ ì§œ')
# plt.ylabel('í­ì—¼ì¼ìˆ˜')
# plt.title('í­ì—¼ ë°œìƒì¼ìˆ˜ ë³€í™” (1994~2024)')
# plt.grid(True)

# # ê·¸ë˜í”„ ì¶œë ¥
# plt.show()
# plt.figure(figsize=(25, 6))
# plt.bar(df_nonzero['ì—°ì›”'], df_nonzero['í­ì—¼ì¼ìˆ˜'], color='red')

# # ğŸ“Œ **Xì¶• ëˆˆê¸ˆ & ë¼ë²¨ ì¬ì„¤ì •**
# tick_labels = df_nonzero['ì—°ì›”'].tolist()  # í­ì—¼ ë°œìƒí•œ ì—°ì›” ë¦¬ìŠ¤íŠ¸
# tick_indices = range(len(df_nonzero))  # ì—°ì†ì ì¸ ì¸ë±ìŠ¤ ìƒì„±

# # Xì¶• ëˆˆê¸ˆ ì„¤ì • (í­ì—¼ ë°œìƒí•œ ì—°ì›”ë§Œ í‘œì‹œ)
# plt.xticks(ticks=tick_indices, labels=tick_labels, rotation=90)

# plt.xlabel('ë‚ ì§œ')
# plt.ylabel('í­ì—¼ì¼ìˆ˜')
# plt.title('í­ì—¼ ë°œìƒì¼ìˆ˜ ë³€í™” (1994~2024)')
# plt.grid(True)

# # ê·¸ë˜í”„ ì¶œë ¥
# plt.show()

## --------------------------------------------------------------------------
## --------------------------------------------------------------------------
## --------------------------------------------------------------------
## ì—¬ë¦„ ì œì™¸ í­ì—¼ì¼ìˆ˜ë§Œ
## --------------------------------------------------------------------
## --------------------------------------------------------------------------------------------------------------
## [1] ë°ì´í„° ë¡œë”©
## --------------------------------------------------------------------------------------------------------------
file_h = '../mini_project/ì „êµ­í­ì—¼ì¼ìˆ˜_94_24.csv'
df_h = pd.read_csv(file_h, encoding='cp949')

## --------------------------------------------------------------------------------------------------------------
## [2] ë°ì´í„° ì „ì²˜ë¦¬
## --------------------------------------------------------------------------------------------------------------

# [2-1] ì»¬ëŸ¼ëª… ì •ë¦¬
df_h.columns = ['ë‚ ì§œ', 'í­ì—¼ì¼ìˆ˜', 'í‰ê· ìµœê³ ê¸°ì˜¨']

# [2-2] ë‚ ì§œ ë³€í™˜
df_h['ë‚ ì§œ'] = pd.to_datetime(df_h['ë‚ ì§œ'], format='%b-%y')
df_h['ì—°ì›”'] = df_h['ë‚ ì§œ'].dt.strftime('%Y-%m')
df_h['ì›”'] = df_h['ë‚ ì§œ'].dt.month  # í•„í„°ë§ìš©

# 6~8ì›”(ì—¬ë¦„) ì œì™¸
# df_strang_h = df_h[~df_h['ì›”'].isin([6, 7, 8])]
df_strang_h = df_h[df_h['ì›”'].isin([1,2,3,4,5, 9, 10,11,12])]
# í­ì—¼ ë°œìƒì´ ìˆëŠ” ë°ì´í„°ë§Œ í•„í„°ë§
df_nonzero = df_strang_h[df_strang_h['í­ì—¼ì¼ìˆ˜'] > 0]

## --------------------------------------------------------------------------------------------------------------
## [3] ì‹œê°í™” (Xì¶• ì •ë°€í•˜ê²Œ ìˆ˜ì •)
## --------------------------------------------------------------------------------------------------------------

plt.figure(figsize=(12, 6))
plt.bar(df_nonzero['ì—°ì›”'], df_nonzero['í­ì—¼ì¼ìˆ˜'], color='red')
# ğŸ“Œ **ì¶”ì„¸ì„  ì¶”ê°€**
x = np.arange(len(df_nonzero))  # Xì¶• ì¸ë±ìŠ¤ (ì—°ì›”ì„ ìˆ«ìë¡œ ë³€í™˜)
y = df_nonzero['í­ì—¼ì¼ìˆ˜'].values  # Yì¶• (í­ì—¼ì¼ìˆ˜)

# ì„ í˜• íšŒê·€ (1ì°¨ ë‹¤í•­ì‹)
z = np.polyfit(x, y, 1)  # ê¸°ìš¸ê¸°ì™€ ì ˆí¸ êµ¬í•˜ê¸°
p = np.poly1d(z)  # ë‹¤í•­ì‹ ìƒì„±
plt.plot(df_nonzero['ì—°ì›”'], p(x), color='blue', linestyle='--', linewidth=2, label="ì¶”ì„¸ì„ ")


# ğŸ“Œ **Xì¶• ëˆˆê¸ˆ & ë¼ë²¨ ì¬ì„¤ì •**
tick_labels = df_nonzero['ì—°ì›”'].tolist()  # í­ì—¼ ë°œìƒí•œ ì—°ì›” ë¦¬ìŠ¤íŠ¸
tick_indices = range(len(df_nonzero))  # ì—°ì†ì ì¸ ì¸ë±ìŠ¤ ìƒì„±

# Xì¶• ëˆˆê¸ˆ ì„¤ì • (í­ì—¼ ë°œìƒí•œ ì—°ì›”ë§Œ í‘œì‹œ)
plt.xticks(ticks=tick_indices, labels=tick_labels, rotation=45)

plt.xlabel('ë‚ ì§œ')
plt.ylabel('í­ì—¼ì¼ìˆ˜')
plt.title('ì—¬ë¦„(6~8ì›”) ì œì™¸í•œ í­ì—¼ ë°œìƒì¼ìˆ˜ ë³€í™” (1994~2024)')
plt.grid(True)

# ê·¸ë˜í”„ ì¶œë ¥
plt.show()


## --------------------------------------------------------------------------
## --------------------------------------------------------------------------
## --------------------------------------------------------------------
## ì—¬ë¦„ í­ì—¼ì¼ìˆ˜ë„ ëŠ˜ì–´ë‚˜ê³  ìˆëŠ”ì§€ 
## --------------------------------------------------------------------

## --------------------------------------------------------------------------------------------------------------
## [1] ë°ì´í„° ë¡œë”©
## --------------------------------------------------------------------------------------------------------------
file_h = '../mini_project/ì „êµ­í­ì—¼ì¼ìˆ˜_94_24.csv'
df_h = pd.read_csv(file_h, encoding='cp949')

## --------------------------------------------------------------------------------------------------------------
## [2] ë°ì´í„° ì „ì²˜ë¦¬
## --------------------------------------------------------------------------------------------------------------

# [2-1] ì»¬ëŸ¼ëª… ì •ë¦¬
df_h.columns = ['ë‚ ì§œ', 'í­ì—¼ì¼ìˆ˜', 'í‰ê· ìµœê³ ê¸°ì˜¨']

# [2-2] ë‚ ì§œ ë³€í™˜
df_h['ë‚ ì§œ'] = pd.to_datetime(df_h['ë‚ ì§œ'], format='%b-%y')
df_h['ì—°ì›”'] = df_h['ë‚ ì§œ'].dt.strftime('%Y-%m')
df_h['ì›”'] = df_h['ë‚ ì§œ'].dt.month  # í•„í„°ë§ìš©

# 6~8ì›”(ì—¬ë¦„) ì œì™¸
# df_strang_h = df_h[~df_h['ì›”'].isin([6, 7, 8])]
df_strang_h = df_h[df_h['ì›”'].isin([6,7,8])]
# í­ì—¼ ë°œìƒì´ ìˆëŠ” ë°ì´í„°ë§Œ í•„í„°ë§
df_nonzero = df_strang_h[df_strang_h['í­ì—¼ì¼ìˆ˜'] > 0]

## --------------------------------------------------------------------------------------------------------------
## [3] ì‹œê°í™” (Xì¶• ì •ë°€í•˜ê²Œ ìˆ˜ì •)
## --------------------------------------------------------------------------------------------------------------
## [3] ì‹œê°í™” (êº¾ì€ì„  ê·¸ë˜í”„ + ì¶”ì„¸ì„  ì¶”ê°€)

# plt.figure(figsize=(12, 6))

# # Xì¶•ì„ ìˆ«ìë¡œ ë³€í™˜ (ì—°ì›”ì„ ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©)
# x_values = np.arange(len(df_nonzero))
# y_values = df_nonzero['í­ì—¼ì¼ìˆ˜']

# # ğŸ”¹ êº¾ì€ì„  ê·¸ë˜í”„
# plt.plot(x_values, y_values, marker='o', linestyle='-', color='red', label='í­ì—¼ ì¼ìˆ˜')

# # ğŸ”¹ ì¶”ì„¸ì„  ì¶”ê°€ (ì„ í˜• íšŒê·€)
# z = np.polyfit(x_values, y_values, 1)  # 1ì°¨ ë‹¤í•­ì‹(ì„ í˜• íšŒê·€)
# p = np.poly1d(z)  
# plt.plot(x_values, p(x_values), linestyle="dashed", color="blue", label='ì¶”ì„¸ì„ ')

# # Xì¶• ëˆˆê¸ˆ ì„¤ì • (ì—°ì›” í‘œì‹œ)
# plt.xticks(ticks=x_values, labels=df_nonzero['ì—°ì›”'], rotation=45)

# plt.xlabel('ë‚ ì§œ')
# plt.ylabel('í­ì—¼ì¼ìˆ˜')
# plt.title('ì—¬ë¦„(6~8ì›”) í­ì—¼ ì¼ìˆ˜ (1994~2024)')
# plt.legend()  # ë²”ë¡€ ì¶”ê°€
# plt.grid(True)

# # ê·¸ë˜í”„ ì¶œë ¥
# plt.show()
# plt.figure(figsize=(12, 6))
# plt.bar(df_nonzero['ì—°ì›”'], df_nonzero['í­ì—¼ì¼ìˆ˜'], color='red')

# # ğŸ“Œ **Xì¶• ëˆˆê¸ˆ & ë¼ë²¨ ì¬ì„¤ì •**
# tick_labels = df_nonzero['ì—°ì›”'].tolist()  # í­ì—¼ ë°œìƒí•œ ì—°ì›” ë¦¬ìŠ¤íŠ¸
# tick_indices = range(len(df_nonzero))  # ì—°ì†ì ì¸ ì¸ë±ìŠ¤ ìƒì„±

# # Xì¶• ëˆˆê¸ˆ ì„¤ì • (í­ì—¼ ë°œìƒí•œ ì—°ì›”ë§Œ í‘œì‹œ)
# plt.xticks(ticks=tick_indices, labels=tick_labels, rotation=45)

# plt.xlabel('ë‚ ì§œ')
# plt.ylabel('í­ì—¼ì¼ìˆ˜')
# plt.title('ì—¬ë¦„(6~8ì›”) í­ì—¼ ì¼ìˆ˜ (1994~2024)')
# plt.grid(True)

# # ê·¸ë˜í”„ ì¶œë ¥
# plt.show()
## [3] ì‹œê°í™” (ë§‰ëŒ€ê·¸ë˜í”„ + ì¶”ì„¸ì„ )

plt.figure(figsize=(12, 6))

# Xì¶•ì„ ìˆ«ìë¡œ ë³€í™˜ (ì—°ì›”ì„ ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©)
x_values = np.arange(len(df_nonzero))
y_values = df_nonzero['í­ì—¼ì¼ìˆ˜']

# ğŸ”¹ ë§‰ëŒ€ê·¸ë˜í”„ (í­ì—¼ ì¼ìˆ˜)
plt.bar(x_values, y_values, color='red', label='í­ì—¼ ì¼ìˆ˜')

# ğŸ”¹ ì¶”ì„¸ì„  ì¶”ê°€ (ì„ í˜• íšŒê·€)
z = np.polyfit(x_values, y_values, 1)  # 1ì°¨ ë‹¤í•­ì‹(ì„ í˜• íšŒê·€)
p = np.poly1d(z)
plt.plot(x_values, p(x_values), linestyle="dashed", color="blue", label='ì¶”ì„¸ì„ ')

# ğŸ”¹ Xì¶• ëˆˆê¸ˆ 13ê°œë§Œ ì¶œë ¥ (ê· ë“± ê°„ê²©ìœ¼ë¡œ ì„ íƒ)
num_ticks = 13
tick_indices = np.linspace(0, len(df_nonzero) - 1, num_ticks, dtype=int)  # ê· ë“± ê°„ê²© ì„ íƒ
tick_labels = df_nonzero['ì—°ì›”'].iloc[tick_indices]  # í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ì—°ì›”ë§Œ ì„ íƒ

plt.xticks(ticks=tick_indices, labels=tick_labels, rotation=45)

plt.xlabel('ë‚ ì§œ')
plt.ylabel('í­ì—¼ì¼ìˆ˜')
plt.title('ì—¬ë¦„(6~8ì›”) í­ì—¼ ì¼ìˆ˜ (1994~2024)')
plt.legend()  # ë²”ë¡€ ì¶”ê°€
plt.grid(True)

# ê·¸ë˜í”„ ì¶œë ¥
plt.show()

## ----------------------------------------------------------------------
## ----------------------------------------------------------------------
## ---------------------------------------
## ì—°ë„ë³„ë¡œ í­ì—¼ì¼ìˆ˜ í•©ì¹˜ê¸°
## ---------------------------------------
## --------------------------------------------------------------------------------------------------------------
## [1] ë°ì´í„° ë¡œë”©
## --------------------------------------------------------------------------------------------------------------
file_h = '../mini_project/ì „êµ­í­ì—¼_94_24.csv'
df_h = pd.read_csv(file_h, encoding='cp949')


## --------------------------------------------------------------------------------------------------------------
## [3] ì‹œê°í™” (Xì¶• ì •ë°€í•˜ê²Œ ìˆ˜ì •)
## --------------------------------------------------------------------------------------------------------------

plt.figure(figsize=(25, 6))
plt.bar(df_h['ì—°ë„'], df_h['ì—°í•©ê³„'], color='red')


# ğŸ“Œ **ì¶”ì„¸ì„  ì¶”ê°€**
z = np.polyfit(df_h['ì—°ë„'], df_h['ì—°í•©ê³„'], 1)  # 1ì°¨ ë‹¤í•­ì‹(ì§ì„ ) í”¼íŒ…
p = np.poly1d(z)  # ë‹¤í•­ì‹ ìƒì„±
plt.plot(df_h['ì—°ë„'], p(df_h['ì—°ë„']), color='blue', linestyle='--', linewidth=2, label='ì¶”ì„¸ì„ ')

# ğŸ“Œ **Xì¶• ëˆˆê¸ˆ & ë¼ë²¨ ì¬ì„¤ì •**
# tick_labels = df_nonzero['ì—°ì›”'].tolist()  # í­ì—¼ ë°œìƒí•œ ì—°ì›” ë¦¬ìŠ¤íŠ¸
# tick_indices = range(len(df_nonzero))  # ì—°ì†ì ì¸ ì¸ë±ìŠ¤ ìƒì„±

# # Xì¶• ëˆˆê¸ˆ ì„¤ì • (í­ì—¼ ë°œìƒí•œ ì—°ì›”ë§Œ í‘œì‹œ)
# plt.xticks(ticks=df_h['ì—°ë„'], labels=df_h['ì—°ë„'], rotation=90)

# ğŸ“Œ **Xì¶• ëˆˆê¸ˆ & ë¼ë²¨ ì¬ì„¤ì •**
plt.xticks(ticks=df_h['ì—°ë„'], labels=df_h['ì—°ë„'], rotation=90)


plt.xlabel('ì—°ë„')
plt.ylabel('í­ì—¼ì¼ìˆ˜ ì—°í•©ê³„')
plt.title('í­ì—¼ì¼ìˆ˜ ì—°í•©ê³„ ë³€í™” (1994~2024) ë° ì¶”ì„¸ì„ ')
plt.legend()
plt.grid(True)

# ê·¸ë˜í”„ ì¶œë ¥
plt.show()
